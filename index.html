<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <title>Hockey Habit Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0d1826;
      --panel: rgba(12, 26, 44, 0.85);
      --ice: #e3edf8;
      --accent: #ffb347;
      --accent-dark: #e0871a;
      --red: #d93746;
      --green: #3bb273;
      --card: #132538;
      --text: #f4f7fb;
      --muted: #8da4c7;
      --line: rgba(255,255,255,.08);
      --radius: 16px;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #2d4c7c, #0d1826 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    header {
      padding: .75rem 1rem .5rem;
      display: flex;
      gap: 1rem;
      align-items: center;
      justify-content: space-between;
      backdrop-filter: blur(10px);
    }
    .logo {
      display: flex;
      gap: .5rem;
      align-items: center;
    }
    .logo-badge {
      width: 44px;
      height: 44px;
      border-radius: 999px;
      background: radial-gradient(circle, #ffb347, #ff7700);
      display: grid;
      place-items: center;
      font-weight: 700;
      color: #0d1826;
      border: 2px solid rgba(255,255,255,.4);
      box-shadow: 0 0 12px rgba(0,0,0,.4);
    }
    .title small {
      display: block;
      font-size: .7rem;
      color: var(--muted);
      letter-spacing: .05em;
      text-transform: uppercase;
    }
    .scoreboard {
      display: flex;
      gap: .65rem;
      flex-wrap: wrap;
    }
    .score-tile {
      background: rgba(19, 39, 59, 0.75);
      border: 1px solid rgba(255,255,255,.05);
      border-radius: 999px;
      padding: .4rem .9rem .3rem;
      min-width: 130px;
    }
    .score-label {
      font-size: .6rem;
      text-transform: uppercase;
      letter-spacing: .08em;
      color: var(--muted);
    }
    .score-value {
      font-size: 1.05rem;
      font-weight: 700;
    }
    main {
      display: grid;
      grid-template-columns: 320px minmax(0, 1fr);
      gap: 1rem;
      padding: 0 1rem 1rem;
      flex: 1;
      min-height: 0;
    }
    .habits-panel, .calendar-panel {
      background: rgba(5, 11, 19, 0.55);
      border: 1px solid rgba(255,255,255,.04);
      border-radius: var(--radius);
      backdrop-filter: blur(6px);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }
    .panel-header {
      padding: .75rem .9rem .5rem;
      border-bottom: 1px solid rgba(255,255,255,.02);
      display: flex;
      justify-content: space-between;
      gap: .5rem;
      align-items: center;
    }
    .panel-title {
      font-weight: 600;
      display: flex;
      gap: .4rem;
      align-items: center;
    }
    .pill {
      background: rgba(255,255,255,.06);
      border-radius: 999px;
      padding: .15rem .5rem;
      font-size: .6rem;
      text-transform: uppercase;
      letter-spacing: .06em;
      color: var(--muted);
    }
    .habits-list {
      padding: .6rem .9rem 1rem;
      display: flex;
      flex-direction: column;
      gap: .5rem;
      overflow-y: auto;
    }
    .habit-card {
      background: rgba(19, 37, 58, 0.6);
      border: 1px solid rgba(227, 237, 248, .02);
      border-left: 5px solid rgba(255,179,71,.45);
      border-radius: 14px;
      padding: .4rem .6rem .35rem;
      display: flex;
      justify-content: space-between;
      gap: .5rem;
      align-items: center;
    }
    .habit-left {
      display: flex;
      gap: .5rem;
      align-items: center;
    }
    .badge-number {
      width: 30px;
      height: 36px;
      background: linear-gradient(160deg, #f4f7fb, #b9c7d8);
      border-radius: 6px;
      color: #06101b;
      font-weight: 700;
      display: grid;
      place-items: center;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
      font-size: .8rem;
    }
    .habit-name {
      font-weight: 500;
      font-size: .83rem;
    }
    .habit-goal {
      font-size: .62rem;
      color: var(--muted);
    }
    .btn-del {
      background: rgba(217,55,70,.1);
      border: 1px solid rgba(217,55,70,.25);
      color: #ffeef1;
      border-radius: 8px;
      width: 26px;
      height: 26px;
      display: grid;
      place-items: center;
      cursor: pointer;
      font-size: .75rem;
    }
    .add-form {
      display: flex;
      gap: .4rem;
      padding: 0 .9rem .75rem;
    }
    .add-form input {
      flex: 1;
      background: rgba(4, 9, 16, 0.5);
      border: 1px solid rgba(255,255,255,.03);
      border-radius: 10px;
      padding: .4rem .6rem;
      color: var(--text);
    }
    .add-form input::placeholder {
      color: rgba(236,236,236,.35);
    }
    .btn {
      background: linear-gradient(120deg, #ffb347, #ff7700);
      border: none;
      color: #0d1826;
      border-radius: 10px;
      padding: .4rem .65rem;
      font-weight: 600;
      cursor: pointer;
      font-size: .7rem;
      white-space: nowrap;
    }
    .calendar {
      padding: .75rem .85rem 1rem;
      display: flex;
      flex-direction: column;
      gap: .5rem;
      flex: 1;
      min-height: 0;
    }
    .calendar-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, minmax(2.5rem, 1fr));
      gap: .4rem;
      margin-top: .35rem;
      flex: 1;
    }
    .dow {
      font-size: .6rem;
      text-align: center;
      color: var(--muted);
    }
    .day {
      background: rgba(6, 12, 20, 0.4);
      border: 1px solid rgba(255,255,255,.01);
      border-radius: 9px;
      height: 58px;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      transition: transform .12s ease-out, border .12s ease-out;
      position: relative;
    }
    .day:hover {
      transform: translateY(-2px);
      border: 1px solid rgba(255,179,71,.4);
    }
    .day-number {
      font-weight: 600;
      font-size: .7rem;
      padding: .25rem .3rem 0;
    }
    .day-score {
      font-size: .62rem;
      color: var(--muted);
      padding: 0 .3rem;
      margin-top: auto;
      margin-bottom: .2rem;
    }
    .day.finalized {
      background: radial-gradient(circle, rgba(59,178,115,.5), rgba(13,24,38,.1));
      border: 1px solid rgba(59,178,115,.5);
    }
    .day.failed {
      background: radial-gradient(circle, rgba(217,55,70,.38), rgba(13,24,38,.1));
      border: 1px solid rgba(217,55,70,.25);
    }
    .day-today {
      outline: 2px solid rgba(255,179,71,.75);
    }
    .indicator-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(255,179,71,.7);
    }

    /* modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(3,6,10,.6);
      backdrop-filter: blur(2px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
      padding: 1rem;
    }
    .modal {
      background: radial-gradient(circle at top, rgba(16,30,48,.96), rgba(5,10,16,.95));
      border: 1px solid rgba(241, 173, 84, .25);
      border-radius: 15px;
      width: min(430px, 100%);
      display: flex;
      flex-direction: column;
      max-height: 90vh;
    }
    .modal-header {
      padding: .7rem .85rem .4rem;
      border-bottom: 1px solid rgba(255,255,255,.02);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: .5rem;
    }
    .modal-body {
      padding: .6rem .85rem .6rem;
      display: flex;
      flex-direction: column;
      gap: .4rem;
      overflow-y: auto;
      max-height: 52vh;
    }
    .habit-row {
      display: flex;
      justify-content: space-between;
      background: rgba(10,18,27,.6);
      border-radius: 12px;
      padding: .4rem .5rem .3rem .5rem;
      gap: .3rem;
      align-items: center;
    }
    .habit-row-left {
      display: flex;
      gap: .5rem;
      align-items: center;
    }
    .modal-footer {
      padding: .5rem .85rem .7rem;
      border-top: 1px solid rgba(255,255,255,.02);
      display: flex;
      justify-content: space-between;
      gap: .5rem;
      align-items: center;
    }
    .input-check {
      width: 20px;
      height: 20px;
    }
    .ghost {
      background: rgba(255,255,255,.05);
      color: var(--text);
    }
    .sm {
      font-size: .63rem;
      color: var(--muted);
    }
    @media (max-width: 870px) {
      main {
        grid-template-columns: 1fr;
      }
      header {
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <div class="logo-badge">HK</div>
      <div class="title">
        <div>Hockey Habit Tracker</div>
        <small>J√§√§kiekko ker√§ilykortti -teema ¬∑ Pat Riley parannustulos</small>
      </div>
    </div>
    <div class="scoreboard">
      <div class="score-tile" id="sb-total-habits">
        <div class="score-label">Habits</div>
        <div class="score-value">0</div>
      </div>
      <div class="score-tile" id="sb-goal-avg">
        <div class="score-label">Goal avg %</div>
        <div class="score-value">‚Äî</div>
      </div>
      <div class="score-tile" id="sb-patriley">
        <div class="score-label">Pat Riley kasvu</div>
        <div class="score-value">‚Äî</div>
      </div>
    </div>
  </header>
  <main>
    <section class="habits-panel">
      <div class="panel-header">
        <div class="panel-title">
          üèí Habits / Behaviors
          <span class="pill" id="habit-count">0</span>
        </div>
      </div>
      <div class="habits-list" id="habits-list">
        <!-- habits here -->
      </div>
      <form class="add-form" id="add-habit-form">
        <input type="text" id="habit-name-input" placeholder="Lis√§√§ uusi tapa, esim. '90s luistelu'" required />
        <button class="btn" type="submit">Add</button>
      </form>
    </section>
    <section class="calendar-panel">
      <div class="panel-header">
        <div class="panel-title">üìÖ Suorituskalenteri</div>
      </div>
      <div class="calendar">
        <div class="calendar-head">
          <div>
            <div id="cal-month" style="font-weight:600"></div>
            <div style="font-size:.65rem;color:var(--muted)"><span id="cal-season-label">Season</span></div>
          </div>
          <div style="display:flex;gap:.3rem;">
            <button class="btn ghost" id="btn-prev-month" type="button">‚Üê</button>
            <button class="btn" id="btn-next-month" type="button">‚Üí</button>
          </div>
        </div>
        <div class="calendar-grid" id="calendar-grid">
          <!-- days -->
        </div>
      </div>
    </section>
  </main>

  <!-- modal -->
  <div class="modal-backdrop" id="day-modal">
    <div class="modal">
      <div class="modal-header">
        <div>
          <div id="modal-date" style="font-weight:600">P√§iv√§</div>
          <div id="modal-scoreline" class="sm">‚Äî</div>
        </div>
        <button class="btn ghost" type="button" id="btn-close-modal">Sulje</button>
      </div>
      <div class="modal-body" id="modal-habit-list">
        <!-- habit rows -->
      </div>
      <div class="modal-footer">
        <div>
          <div class="sm">üßÆ Pat Riley t√§lle p√§iv√§lle: <span id="modal-patriley-day">‚Äî</span></div>
          <div class="sm">Merkkaa suoritus, sitten ‚ÄúFinalize Day‚Äù</div>
        </div>
        <div style="display:flex;gap:.4rem;">
          <button class="btn ghost" type="button" id="btn-save-draft">Tallenna</button>
          <button class="btn" type="button" id="btn-finalize">Finalize Day</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ====== STATE & STORAGE ======
    const STORAGE_KEY = "hockey_habits_v1";
    let state = {
      habits: [],
      days: {}, // "YYYY-MM-DD": { checks: {habitId: true/false}, finalized: bool, score: number }
      goalAvg: 80,
      lastOpened: null
    };

    function loadState() {
      const saved = localStorage.getItem(STORAGE_KEY);
      if (saved) {
        try {
          state = JSON.parse(saved);
        } catch (e) {
          console.warn("Virhe luettaessa statea, resetointi");
        }
      } else {
        // defaultit
        state.habits = [
          { id: "h1", name: "Laukaustreenit 20min" },
          { id: "h2", name: "Luisteluporras / agility" },
          { id: "h3", name: "Mobility + core" }
        ];
        state.goalAvg = 80;
        saveState();
      }
    }

    function saveState() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      updateScoreboard();
    }

    // ====== UTILS ======
    function formatDateKey(date) {
      return date.toISOString().split("T")[0];
    }
    function parseDateKey(key) {
      return new Date(key + "T00:00:00");
    }
    function getMonthNameFI(monthIndex) {
      const names = ["tammikuu", "helmikuu", "maaliskuu", "huhtikuu", "toukokuu", "kes√§kuu", "hein√§kuu", "elokuu", "syyskuu", "lokakuu", "marraskuu", "joulukuu"];
      return names[monthIndex];
    }

    // ====== RENDER HABITS ======
    const habitsListEl = document.getElementById("habits-list");
    const habitCountEl = document.getElementById("habit-count");
    function renderHabits() {
      habitsListEl.innerHTML = "";
      state.habits.forEach((h, idx) => {
        const card = document.createElement("div");
        card.className = "habit-card";
        card.innerHTML = `
          <div class="habit-left">
            <div class="badge-number">${(idx+1).toString().padStart(2, "0")}</div>
            <div>
              <div class="habit-name">${h.name}</div>
              <div class="habit-goal">Habit ID: ${h.id}</div>
            </div>
          </div>
          <button class="btn-del" title="Poista" data-habit-id="${h.id}">√ó</button>
        `;
        habitsListEl.appendChild(card);
      });
      habitCountEl.textContent = state.habits.length;
      document.getElementById("sb-total-habits").querySelector(".score-value").textContent = state.habits.length;
      habitsListEl.querySelectorAll(".btn-del").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-habit-id");
          if (confirm("Poistetaanko t√§m√§ habit?")) {
            deleteHabit(id);
          }
        });
      });
    }

    function addHabit(name) {
      const id = "h" + Math.random().toString(36).slice(2, 7);
      state.habits.push({ id, name });
      // pit√§√§ my√∂s lis√§t√§ t√§m√§ habit kaikkiin jo olemassa oleviin p√§iv√§dataan "falseksi"
      Object.keys(state.days).forEach(dayKey => {
        const day = state.days[dayKey];
        if (!day.checks) day.checks = {};
        if (!(id in day.checks)) day.checks[id] = false;
      });
      saveState();
      renderHabits();
      renderCalendar(currentMonth, currentYear);
    }

    function deleteHabit(id) {
      state.habits = state.habits.filter(h => h.id !== id);
      // poista habit viittaus p√§ivist√§
      Object.keys(state.days).forEach(dayKey => {
        const day = state.days[dayKey];
        if (day && day.checks && id in day.checks) {
          delete day.checks[id];
          // pit√§√§ p√§ivitt√§√§ score jos finalized
          if (day.finalized) {
            day.score = calcDayScore(day);
          }
        }
      });
      saveState();
      renderHabits();
      renderCalendar(currentMonth, currentYear);
    }

    document.getElementById("add-habit-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const nameInput = document.getElementById("habit-name-input");
      const name = nameInput.value.trim();
      if (!name) return;
      addHabit(name);
      nameInput.value = "";
    });

    // ====== CALENDAR ======
    const calendarGridEl = document.getElementById("calendar-grid");
    const calMonthEl = document.getElementById("cal-month");
    const today = new Date();
    let currentMonth = today.getMonth();
    let currentYear = today.getFullYear();

    function renderCalendar(month, year) {
      calendarGridEl.innerHTML = "";
      const firstDay = new Date(year, month, 1);
      const startingDayOfWeek = firstDay.getDay(); // 0 = su
      const daysInMonth = new Date(year, month+1, 0).getDate();

      calMonthEl.textContent = getMonthNameFI(month) + " " + year;

      // weekday labels
      const weekdays = ["Su", "Ma", "Ti", "Ke", "To", "Pe", "La"];
      weekdays.forEach(d => {
        const el = document.createElement("div");
        el.className = "dow";
        el.textContent = d;
        calendarGridEl.appendChild(el);
      });

      // empty cells
      let startIndex = startingDayOfWeek; // because we started with Su
      for (let i = 0; i < startIndex; i++) {
        const empty = document.createElement("div");
        calendarGridEl.appendChild(empty);
      }

      for (let day = 1; day <= daysInMonth; day++) {
        const d = document.createElement("div");
        d.className = "day";
        const thisDate = new Date(year, month, day);
        const key = formatDateKey(thisDate);
        const savedDay = state.days[key];
        const isToday = key === formatDateKey(today);

        let scoreText = "";
        if (savedDay && typeof savedDay.score === "number") {
          scoreText = savedDay.score.toFixed(0) + "%";
          if (savedDay.finalized) {
            d.classList.add(savedDay.score >= (state.goalAvg || 80) ? "finalized":"failed");
          }
        } else if (savedDay) {
          d.classList.add("day-draft");
        }

        d.innerHTML = `
          <div class="day-number">${day}</div>
          ${isToday ? '<div class="indicator-dot"></div>' : ''}
          <div class="day-score">${scoreText}</div>
        `;
        if (isToday) d.classList.add("day-today");

        d.addEventListener("click", () => openDayModal(key));
        calendarGridEl.appendChild(d);
      }
    }

    document.getElementById("btn-prev-month").addEventListener("click", () => {
      currentMonth--;
      if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar(currentMonth, currentYear);
    });
    document.getElementById("btn-next-month").addEventListener("click", () => {
      currentMonth++;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      renderCalendar(currentMonth, currentYear);
    });

    // ====== MODAL & DAY LOGIC ======
    const modalBackdrop = document.getElementById("day-modal");
    const modalHabitList = document.getElementById("modal-habit-list");
    const modalDate = document.getElementById("modal-date");
    const modalScoreline = document.getElementById("modal-scoreline");
    const modalPatRileyDay = document.getElementById("modal-patriley-day");
    let activeDayKey = null;

    function openDayModal(dayKey) {
      activeDayKey = dayKey;
      if (!state.days[dayKey]) {
        state.days[dayKey] = { checks: {}, finalized: false, score: null };
      }
      const dayData = state.days[dayKey];
      // ensure all habits in checks
      state.habits.forEach(h => {
        if (!dayData.checks) dayData.checks = {};
        if (!(h.id in dayData.checks)) {
          dayData.checks[h.id] = false;
        }
      });

      const d = parseDateKey(dayKey);
      modalDate.textContent = d.toLocaleDateString("fi-FI", { weekday: "long", day: "numeric", month: "long", year: "numeric" });
      renderModalHabits(dayData);
      const score = calcDayScore(dayData);
      modalScoreline.textContent = "P√§iv√§n suoritus: " + (isNaN(score) ? "‚Äî" : score.toFixed(0) + "%") + " ¬∑ Tavoite: " + (state.goalAvg || 80) + "%";
      modalPatRileyDay.textContent = calcPatRileyForDay(score);
      modalBackdrop.style.display = "flex";
      saveState();
    }

    function closeDayModal() {
      modalBackdrop.style.display = "none";
      activeDayKey = null;
      renderCalendar(currentMonth, currentYear);
    }

    document.getElementById("btn-close-modal").addEventListener("click", closeDayModal);
    modalBackdrop.addEventListener("click", (e) => {
      if (e.target === modalBackdrop) closeDayModal();
    });

    function renderModalHabits(dayData) {
      modalHabitList.innerHTML = "";
      state.habits.forEach(h => {
        const row = document.createElement("div");
        row.className = "habit-row";
        const checked = !!dayData.checks[h.id];
        row.innerHTML = `
          <div class="habit-row-left">
            <input type="checkbox" class="input-check" data-habit-id="${h.id}" ${checked ? "checked":""} />
            <div>
              <div style="font-weight:500;font-size:.8rem">${h.name}</div>
              <div class="sm">ID: ${h.id}</div>
            </div>
          </div>
          <div style="font-size:.6rem;color:${checked ? "#3bb273":"var(--muted)"}">${checked ? "‚úì suoritettu" : "ei viel√§"}</div>
        `;
        modalHabitList.appendChild(row);
      });

      modalHabitList.querySelectorAll(".input-check").forEach(inp => {
        inp.addEventListener("change", () => {
          const habitId = inp.getAttribute("data-habit-id");
          dayData.checks[habitId] = inp.checked;
          // p√§ivit√§mme headereihin live
          const score = calcDayScore(dayData);
          modalScoreline.textContent = "P√§iv√§n suoritus: " + (isNaN(score) ? "‚Äî" : score.toFixed(0) + "%") + " ¬∑ Tavoite: " + (state.goalAvg || 80) + "%";
          modalPatRileyDay.textContent = calcPatRileyForDay(score);
          saveState();
        });
      });
    }

    // ====== CALCULATIONS ======
    function calcDayScore(dayData) {
      const totalHabits = state.habits.length;
      if (totalHabits === 0) return 0;
      let done = 0;
      state.habits.forEach(h => {
        if (dayData.checks && dayData.checks[h.id]) done++;
      });
      return (done / totalHabits) * 100;
    }

    function getSeasonAvg() {
      // lasketaan kaikkien finalized p√§ivien keskiarvo
      const entries = Object.values(state.days).filter(d => d.finalized && typeof d.score === "number");
      if (!entries.length) return null;
      const sum = entries.reduce((acc, d) => acc + d.score, 0);
      return sum / entries.length;
    }

    function calcPatRileyForDay(todayScore) {
      const seasonAvg = getSeasonAvg();
      if (seasonAvg === null || seasonAvg === 0 || isNaN(todayScore)) return "‚Äî";
      const diff = ((todayScore - seasonAvg) / seasonAvg) * 100;
      const sign = diff >= 0 ? "+" : "";
      return sign + diff.toFixed(1) + "% vs kausi";
    }

    function updateScoreboard() {
      // goal avg
      document.getElementById("sb-goal-avg").querySelector(".score-value").textContent = (state.goalAvg || 80) + "%";
      // pat riley board: verrataan viimeiseen finalisoituun p√§iv√§√§n
      const seasonAvg = getSeasonAvg();
      const pattile = document.getElementById("sb-patriley").querySelector(".score-value");
      if (seasonAvg === null) {
        pattile.textContent = "‚Äî";
      } else {
        // k√§ytet√§√§n viimeisimm√§n finalisoidun p√§iv√§n scorea
        const finalized = Object.entries(state.days).filter(([k, d]) => d.finalized && typeof d.score === "number")
          .sort((a,b) => a[0] < b[0] ? 1 : -1);
        if (finalized.length) {
          const lastScore = finalized[0][1].score;
          const diff = ((lastScore - seasonAvg) / seasonAvg) * 100;
          const sign = diff >= 0 ? "+" : "";
          pattile.textContent = sign + diff.toFixed(1) + "%";
        } else {
          pattile.textContent = "‚Äî";
        }
      }
    }

    // ====== BUTTONS IN MODAL ======
    document.getElementById("btn-save-draft").addEventListener("click", () => {
      if (!activeDayKey) return;
      const dayData = state.days[activeDayKey];
      dayData.finalized = false;
      dayData.score = calcDayScore(dayData);
      saveState();
      alert("Tallennettu luonnoksena.");
      renderCalendar(currentMonth, currentYear);
    });

    document.getElementById("btn-finalize").addEventListener("click", () => {
      if (!activeDayKey) return;
      const dayData = state.days[activeDayKey];
      dayData.finalized = true;
      dayData.score = calcDayScore(dayData);
      saveState();
      closeDayModal();
    });

    // ====== INIT ======
    loadState();
    renderHabits();
    renderCalendar(currentMonth, currentYear);
    updateScoreboard();
  </script>
</body>
</html>
